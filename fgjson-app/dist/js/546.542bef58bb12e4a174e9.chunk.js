(self.webpackChunkfgjson_app=self.webpackChunkfgjson_app||[]).push([[546],{84081:(e,t,s)=>{"use strict";s.d(t,{Z:()=>U});var r=s(67294),n=s.n(r),o=s(2479),i=s(8486);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}const a=({loading:e,isLoading:t})=>e||t&&("function"==typeof t?t():!0===t);var l=s(32214);const c=(0,o.CA)({onNext:({index:e=0,setIndex:t=(()=>{}),validResponses:s=[]})=>()=>{t(Math.min(s.length-1,e+1))},onPrevious:({index:e,setIndex:t=(()=>{})})=>()=>{t(Math.max(0,e-1))}}),h=(0,o.lG)({format:(0,l.wR)(),validator:l.Te});var u=s(33664),d=s(22222),m=s(48953),f=s(86807),g=s(45697),y=s.n(g),v=s(27723),b=s(83404),E=s(80681);function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class P extends n().Component{constructor(...e){super(...e),x(this,"onTouchStart",(e=>{const t=e.touches[0];this.startX=t.pageX,this.startY=t.pageY,this.setState({scrolling:!1})})),x(this,"onTouchMove",(e=>{const t=e.touches[0],s=e.currentTarget;if(this.state.scrolling)return void e.stopPropagation();if(Math.abs(this.startY-t.pageY)>Math.abs(this.startX-t.pageX))return void e.stopPropagation();const r=this.startX<t.pageX?"left":"right";(s&&"left"===r&&s.clientWidth<s.scrollWidth&&0!==s.scrollLeft||s&&"right"===r&&s.clientWidth+s.scrollLeft!==s.scrollWidth)&&(this.setState({scrolling:!0}),e.stopPropagation())})),x(this,"onTouchEnd",(()=>{this.setState({scrolling:!1})})),x(this,"renderPage",(()=>{const e="function"==typeof this.props.viewers?this.props.viewers:this.props.viewers[this.props.format];return e?n().createElement(e,{response:this.props.response,layer:this.props.layer}):null}))}render(){return n().createElement("div",{style:{width:"100%",height:"100%",overflowX:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}x(P,"propTypes",{format:y().string,viewers:y().oneOfType([y().func,y().object]),response:y().oneOfType([y().string,y().object,y().node]),layer:y().object});var w=s(41609),R=s.n(w),N=s(31351),C=s.n(N),T=s(10240),j=s.n(T),O=(s(27361),s(63278));function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k extends n().Component{constructor(...e){super(...e),I(this,"getResponseProperties",(()=>{const e=this.props.validator(this.props.format),t=this.props.responses.map((e=>void 0===e?{}:e)),s=this.props.renderEmpty?e.getValidResponses(t):t,r=e.getNoValidResponses(this.props.responses),n=this.props.requests.length===r.length;return{validResponses:s,currResponse:this.getCurrentResponse(s[this.props.index]),emptyResponses:n,invalidResponses:r}})),I(this,"getCurrentResponse",(e=>this.props.validator(this.props.format).getValidResponses([e]))),I(this,"renderEmptyLayers",(()=>{const{invalidResponses:e,emptyResponses:t}=this.getResponseProperties();if(0===this.props.missingResponses&&t)return null;let s=0!==e.length;if(this.props.renderEmpty||(s=s&&0===this.props.missingResponses),s){const t=e.map((e=>{const{layerMetadata:t}=e;return t.title}));return this.props.showEmptyMessageGFI?n().createElement(E.Alert,{bsStyle:"info"},n().createElement(b.Z,{msgId:"noInfoForLayers"}),n().createElement("b",null,t.join(", "))):null}return null})),I(this,"renderPage",(e=>{const t=this.props.viewers[this.props.format];return t?n().createElement(t,{response:e}):null})),I(this,"renderEmptyPages",(()=>{const{emptyResponses:e}=this.getResponseProperties();return 0===this.props.missingResponses&&e?n().createElement(E.Alert,{bsStyle:"danger"},n().createElement("h4",null,n().createElement(v.Z,{msgId:"noFeatureInfo"}))):null})),I(this,"renderPages",(()=>{const{validResponses:e}=this.getResponseProperties();return e.map(((t,s)=>{var r;const{response:o,layerMetadata:i}=t,p=((e,t)=>{const{format:s,queryParams:r={}}=e;return r.info_format||r.outputFormat||s&&O.O7[s]||t.format})(t,this.props),a=this.props.header;let c;null!=i&&null!==(r=i.viewer)&&void 0!==r&&r.type&&(c=(0,l.gA)(i.viewer.type));const h=e.filter((e=>!j()(e.response,"no features were found"))).length;return n().createElement(E.Panel,{eventKey:s,key:s,collapsible:this.props.collapsible,header:a?n().createElement("span",null,n().createElement(a,M({size:h},this.props.headerOptions,i,{index:this.props.index,onNext:()=>this.props.onNext(),onPrevious:()=>this.props.onPrevious()}))):null,style:this.props.style},n().createElement(P,{response:o,format:p,viewers:c||this.props.viewers,layer:i}))}))})),I(this,"containerStyle",(e=>R()(e)&&this.props.isMobile?{height:"100%"}:{display:R()(e)?"none":"block"}))}shouldComponentUpdate(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}render(){const e=this.props.container,{currResponse:t,emptyResponses:s}=this.getResponseProperties();let r=[this.renderEmptyLayers(),n().createElement(e,M({},this.props.containerProps,{onChangeIndex:e=>{this.props.setIndex(e)},ref:"container",index:this.props.index||0,key:"swiper",style:this.containerStyle(t),className:"swipeable-view"}),this.renderPages())];return r=this.props.isMobile?r:C()(r),n().createElement("div",{className:"mapstore-identify-viewer"},s?this.renderEmptyPages():r.map((e=>e)))}}I(k,"propTypes",{format:y().string,collapsible:y().bool,requests:y().array,responses:y().array,missingResponses:y().number,container:y().oneOfType([y().object,y().func]),header:y().oneOfType([y().object,y().func]),headerOptions:y().object,validator:y().func,viewers:y().object,style:y().object,containerProps:y().object,index:y().number,onNext:y().func,onPrevious:y().func,onUpdateIndex:y().func,setIndex:y().func,showEmptyMessageGFI:y().bool,renderEmpty:y().bool,loaded:y().bool,isMobile:y().bool}),I(k,"defaultProps",{format:(0,l.wR)(),responses:[],requests:[],missingResponses:0,collapsible:!1,headerOptions:{},container:E.Accordion,validator:l.Te,viewers:(0,l.Qm)(),style:{position:"relative",marginBottom:0},containerProps:{},showEmptyMessageGFI:!0,renderEmpty:!1,onNext:()=>{},onPrevious:()=>{},setIndex:()=>{},isMobile:!1});const q=k;var G=s(1469),S=s.n(G),F=s(52353),A=s.n(F),B=s(49836);function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class W extends n().Component{constructor(...e){super(...e),L(this,"renderLeftButton",(()=>{const e=0===this.props.index;return this.props.useButtons?n().createElement(B.Z,{ref:"left",disabled:e,className:this.props.btnClassName||"square-button-md no-border",onClick:()=>{this.props.onPrevious()}},n().createElement(E.Glyphicon,{glyph:"back"})):n().createElement("a",{ref:"left",disabled:e,className:this.props.btnClassName||"square-button-md",onClick:()=>{this.props.onPrevious()}},n().createElement(E.Glyphicon,{glyph:"back"}))})),L(this,"renderRightButton",(()=>{const e=this.props.index===this.props.size-1;return this.props.useButtons?n().createElement(B.Z,{ref:"right",disabled:e,className:this.props.btnClassName||"square-button-md no-border",onClick:()=>{this.props.onNext()}},n().createElement(E.Glyphicon,{glyph:"next"})):n().createElement("a",{ref:"right",disabled:e,className:this.props.btnClassName||"square-button-md",onClick:()=>{this.props.onNext()}},n().createElement(E.Glyphicon,{glyph:"next"}))}))}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){return n().createElement("div",{className:"ms-identify-swipe-header"},this.props.size>1&&n().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderLeftButton()),n().createElement("div",{className:"ms-identify-swipe-header-title"},this.props.title),this.props.size>1&&n().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderRightButton()))}}L(W,"propTypes",{title:y().string,index:y().number,size:y().number,container:y().oneOfType([y().object,y().func]),useButtons:y().bool,onPrevious:y().func,onNext:y().func,btnClassName:y().string}),L(W,"defaultProps",{useButtons:!0});const X=W;var Z=s(99586);const z=(0,o.qC)((0,u.connect)((0,d.P1)(m.Qf,(e=>({index:e}))),{setIndex:f.oO}),(0,o.lG)({index:0,responses:[]})),Y=(0,d.P1)([m.q7,m.o9,m.OK,m.us,m.x0,Z.hp,m.vR],((e,t,s,r,n,o,i)=>({responses:e,validResponses:t,requests:s,format:r,showEmptyMessageGFI:n,missingResponses:(s||[]).length-(e||[]).length,renderEmpty:o,loaded:i}))),U={identify:(0,o.qC)((0,u.connect)(Y),(0,o.lG)({responses:[],container:({index:e,children:t})=>n().createElement(n().Fragment,null,S()(t)&&t[e]||t),header:X}),z,h,c,((e=a,t={},s=i.Z)=>(0,o.WY)(e,(()=>({loaderProps:e})=>n().createElement(s,p({},t,e)))))((({loaded:e})=>A()(e))))(q)}},26160:(e,t,s)=>{"use strict";s.d(t,{fH:()=>o,FP:()=>i,R3:()=>p});var r=s(55877),n=s.n(r);const o=(e=n()(),t="ms-map-popup")=>{const s=document.createElement("div");return s.setAttribute("id",e+"-map-popup"),s.setAttribute("class",t),s},i=(e="")=>e.startsWith("<"),p=(e,t)=>{if(!t)return e;if(t instanceof Node){const s=document.createDocumentFragment();s.appendChild(t),e.appendChild(s)}else i(t)?e.innerHTML=t:e.append(document.createTextNode(String(t)));return e}},31351:e=>{var t=Array.prototype.reverse;e.exports=function(e){return null==e?e:t.call(e)}},10240:(e,t,s)=>{var r=s(29750),n=s(80531),o=s(40554),i=s(79833);e.exports=function(e,t,s){return e=i(e),s=null==s?0:r(o(s),0,e.length),t=n(t),e.slice(s,s+t.length)==t}},55877:(e,t,s)=>{var r=s(23570),n=s(71171),o=n;o.v1=r,o.v4=n,e.exports=o},71171:(e,t,s)=>{var r=s(85217),n=s(45327);e.exports=function(e,t,s){var o=t&&s||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var p=0;p<16;++p)t[o+p]=i[p];return t||n(i)}}}]);